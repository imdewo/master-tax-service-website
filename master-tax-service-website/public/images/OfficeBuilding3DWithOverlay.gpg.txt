loading + typing)
"use client";

import React, { useRef } from "react";
import { Canvas, useFrame, useLoader } from "@react-three/fiber";
import { Plane } from "@react-three/drei";
import * as THREE from "three";

interface Props {
imageUrl: string;
onSignClick: () => void;
}

const TiltImagePlane = ({ imageUrl }: { imageUrl: string }) => {
const ref = useRef<THREE.Mesh>(null!);
const texture = useLoader(THREE.TextureLoader, imageUrl);

useFrame(({ mouse }) => {
if (ref.current) {
ref.current.rotation.y = mouse.x * 0.1;
ref.current.rotation.x = mouse.y * 0.05;
}
});

return (
<Plane ref={ref} args={[8, 5]}>
<meshStandardMaterial map={texture} />
</Plane>
);
};

export const OfficeBuilding3DWithOverlay: React.FC<Props> = ({
imageUrl,
onSignClick,
}) => (
<div className="w-full h-[500px] relative rounded-lg shadow-xl overflow-hidden">
<Canvas camera={{ position: [0, 0, 10], fov: 60 }}>
<ambientLight intensity={0.8} />
<directionalLight position={[10, 10, 5]} intensity={1} />
<TiltImagePlane imageUrl={imageUrl} />
</Canvas>

<div className="absolute inset-0 flex items-end justify-center bg-black bg-opacity-20 pb-10 pointer-events-none">
<button
onClick={onSignClick}
className="pointer-events-auto px-4 py-2 bg-green-600 hover:bg-green-700 rounded text-white"
>
Sign Documents
</button>
</div>
</div>
);

